{% extends "admin/change_list.html" %}
{% load static admin_urls %}

{# убираем стандартные breadcrumbs #}
{% block breadcrumbs %}{% endblock %}

{% block title %}Макро | Валюта{% endblock %}

{% block extrahead %}
  {{ block.super }}
  {# можно использовать тот же css, что и для keyrate/ИПЦ #}
  <link rel="stylesheet" href="{% static 'macro/keyrate_admin.css' %}">
  <style>
      .macro-btn-sm {
          font-size: 12px !important;
          padding: 3px 10px !important;
          border-radius: 6px !important;
          line-height: 1.3 !important;
      }

      .macro-btn-secondary {
          background: #e5e7eb;
          border-color: #d1d5db;
          color: #374151;
      }

      .macro-btn-secondary:hover {
          background: #d1d5db;
          color: #111827;
      }

      /* чтобы кнопка выглядела как аккуратная «полоска» с иконкой */
      .macro-btn-icon {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 6px;
          width: 100%;
          border-radius: 8px;
          box-shadow: 0 1px 2px rgba(15,23,42,0.06);
          text-decoration: none;
      }

      .macro-btn-icon .icon {
          display: inline-flex;
          align-items: center;
          justify-content: center;
      }

      .macro-btn-icon svg {
          display: block;
      }
  </style>
{% endblock %}

{# ─────────────────────────────────────
   КРАСИВЫЙ ХЕДЕР "Курсы валют"
   ───────────────────────────────────── #}
{% block content_title %}
<div style="
    display:flex;
    align-items:flex-start;
    gap:16px;
    flex-wrap:wrap;
    padding-bottom:6px;
">

  {# ЛЕВАЯ ЧАСТЬ: аватар + текст #}
  <div style="display:flex; align-items:flex-start; gap:12px; flex-wrap:wrap;">

<div style="
    width:40px;
    height:40px;
    border-radius:10px;
    background: linear-gradient(135deg, #0f172a, #1e293b);
    display:flex;
    align-items:center;
    justify-content:center;
    box-shadow:0 0 0 1px rgba(15,23,42,.12), 0 10px 25px rgba(15,23,42,0.25);
">
  <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
       stroke="#f8fafc" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12 1v22" />
      <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7H14a3.5 3.5 0 0 1 0 7H6" />
  </svg>
</div>



    <div style="display:flex; flex-direction:column; gap:4px; line-height:1.3;">

      <span style="
          font-size:11px;
          text-transform:uppercase;
          letter-spacing:0.08em;
          color:#6b7280;
      ">
        Макроэкономика · Курсы валют
      </span>

      <span style="font-size:19px; font-weight:600; color:#111827;">
        Курсы валют ЦБ РФ
      </span>

      <div style="display:flex; flex-wrap:wrap; gap:6px; margin-top:4px;">
        <span style="
            font-size:11px;
            padding:2px 8px;
            border-radius:6px;
            background:#e0f2fe;
            color:#1d4ed8;
            font-weight:600;
        ">
          Базовая валюта: RUB
        </span>

      </div>

      <span style="margin-top:4px; font-size:11px; color:#6b7280; max-width:520px;">
        Здесь хранится история ежедневных курсов валют к рублю.
        Эти данные используются для пересчёта арендных платежей,
        конвертации отчётности и аналитики по договорам в иностранной валюте.
      </span>

    </div>
  </div>

  {# ПРАВАЯ КАРТОЧКА: навигация + действия #}
  <div style="
      flex:1;
      min-width:260px;
      max-width:340px;
      border-radius:14px;
      background:rgba(248,250,252,0.95);
      box-shadow:0 18px 40px rgba(15,23,42,0.16);
      padding:10px 12px 12px;
      display:flex;
      flex-direction:column;
      gap:10px;
  ">
    {# Навигация #}
    <div>
      <div style="display:flex;justify-content:space-between;align-items:baseline;">
        <span style="
            font-size:11px;
            letter-spacing:0.14em;
            text-transform:uppercase;
            color:#9ca3af;
        ">
          Навигация
        </span>
        <span style="font-size:13px;font-weight:600;color:#0f172a;">
          Макропоказатели
        </span>
      </div>

      <div style="display:flex;flex-direction:column;gap:6px;margin-top:6px;">

        <a href="{% url 'admin:app_list' 'macro' %}"
           class="button"
           style="
             font-size:12px;
             padding:3px 10px;
             border-radius:6px;
             display:inline-flex;
             align-items:center;
             gap:6px;
             justify-content:flex-start;
           ">
          📊 Ко всем макропоказателям
        </a>

        {% comment %} <a href="{% url 'admin:macro_inflation_changelist' %}"
           class="button"
           style="
             font-size:12px;
             padding:3px 10px;
             border-radius:6px;
             display:inline-flex;
             align-items:center;
             gap:6px;
             justify-content:flex-start;
           ">
          📈 История ИПЦ
        </a> {% endcomment %}

        {% comment %} <a href="{% url 'admin:macro_keyrate_changelist' %}"
           class="button"
           style="
             font-size:12px;
             padding:3px 10px;
             border-radius:6px;
             display:inline-flex;
             align-items:center;
             gap:6px;
             justify-content:flex-start;
           ">
          💹 Ключевая ставка
        </a> {% endcomment %}
      </div>
    </div>

    {# Разделитель #}
    <div style="height:1px;background:rgba(148,163,184,0.35);margin:2px 0 4px;"></div>

    {# Действия по курсам #}
    <div style="display:flex;flex-direction:column;gap:6px;">
      <div style="display:flex;justify-content:space-between;align-items:center;">
        <span style="
            font-size:11px;
            letter-spacing:0.14em;
            text-transform:uppercase;
            color:#9ca3af;
        ">
          Действия
        </span>
        <span style="font-size:11px;color:#6b7280;">
          Управление курсами
        </span>
      </div>

      {# Кнопка "Добавить курс валюты" #}
      {% comment %} <a href="{% url cl.opts|admin_urlname:'add' %}"
         class="button"
         style="
           display:inline-flex;
           align-items:center;
           justify-content:center;
           gap:6px;
           width:100%;
           padding:6px 10px;
           font-size:12px;
           font-weight:600;
           border-radius:6px;
           background:#22c55e;
           color:white;
           text-decoration:none;
         ">
        ➕ Добавить курс валюты
      </a> {% endcomment %}

      <form action="{% url 'admin:macro_currency_load' %}"
      method="get"
      style="
        display:flex;
        flex-direction:column;
        gap:6px;
        margin-top:2px;
        font-size:11px;
        color:#4b5563;
      ">

  <div style="display:flex; gap:6px; align-items:center; flex-wrap:wrap;">
    <label style="display:flex;align-items:center;gap:4px;">
      <span>С:</span>
      <input type="date"
             name="date_from"
             value="{{ today }}"
             style="
               font-size:11px;
               padding:2px 4px;
               border-radius:4px;
             ">
    </label>

    <label style="display:flex;align-items:center;gap:4px;">
      <span>По:</span>
      <input type="date"
             name="date_to"
             value="{{ today }}"
             style="
               font-size:11px;
               padding:2px 4px;
               border-radius:4px;
             ">
    </label>
  </div>

  <button type="submit"
          class="btn macro-btn-sm macro-btn-secondary macro-btn-icon">
      <span class="icon">
          {# та же иконка, что у календаря, только логичнее назвать «обновление» #}
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
               stroke="currentColor" stroke-width="2"
               stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25" />
              <path d="M12 12v9" />
              <path d="M8 17l4 4 4-4" />
          </svg>
      </span>
      <span>Загрузить курсы за период</span>
  </button>

</form>


    </div>
  </div>

</div>

{# нижняя полоса-хлебные крошки #}
<div style="
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-top:4px;
    padding:6px 2px 0;
    border-top:1px solid #e5e7eb;
    color:#6b7280;
    font-size:11px;
">
  <nav style="display:flex;align-items:center;gap:4px;flex-wrap:wrap;">
    <a href="{% url 'admin:index' %}"
       style="text-transform:uppercase;letter-spacing:0.08em;text-decoration:none;color:#9ca3af;">
      НАЧАЛО
    </a>
    <span>›</span>
    <a href="{% url 'admin:app_list' 'macro' %}"
       style="text-transform:uppercase;letter-spacing:0.08em;text-decoration:none;color:#9ca3af;">
      МАКРОПОКАЗАТЕЛИ
    </a>
    <span>›</span>
    <span style="text-transform:uppercase;letter-spacing:0.08em;color:#4b5563;font-weight:600;">
      КУРСЫ ВАЛЮТ
    </span>
  </nav>

  <span style="color:#9ca3af;">
    Базовая валюта RUB · данные ЦБ РФ
  </span>
</div>
{% endblock %}



{# ─────────────────────────────────────
   КНОПКА/ПАНЕЛЬ object-tools — очищаем,
   т.к. все действия перенесены в карточку
   ───────────────────────────────────── #}
{% block object-tools %}
  {# оставляем пустым, чтобы в стандартной панели не было кнопок #}
{% endblock %}
