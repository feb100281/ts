{# templates/admin/macro/currencyrate/change_form.html #}
{% extends "admin/change_form.html" %}
{% load static admin_urls %}

{# —É–±–∏—Ä–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ breadcrumbs #}
{% block breadcrumbs %}{% endblock %}

{% block extrahead %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'macro/keyrate_admin.css' %}">
{% endblock %}

{% block content_title %}
{% with obj=adminform.form.instance %}
  <div style="
      display:flex;
      align-items:flex-start;
      gap:16px;
      flex-wrap:wrap;
      padding-bottom:6px;
  ">

    <!-- –õ–ï–í–ê–Ø –ß–ê–°–¢–¨: –ê–í–ê–¢–ê–† + –¢–ï–ö–°–¢ -->
    <div style="display:flex; align-items:flex-start; gap:12px; flex-wrap:wrap;">

      <!-- –ê–í–ê–¢–ê–† -->
      <div style="
          width:40px;
          height:40px;
          border-radius:10px;
          background:{% if obj.pk %}linear-gradient(135deg, #0f172a, #1e293b){% else %}#e5e7eb{% endif %};
          display:flex;
          align-items:center;
          justify-content:center;
          box-shadow:0 0 0 1px rgba(15,23,42,.12),
                     {% if obj.pk %}0 10px 25px rgba(15,23,42,0.25){% else %}0 0 0 rgba(0,0,0,0){% endif %};
      ">
        {% if obj.pk %}
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
               stroke="#f8fafc" stroke-width="2"
               stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 1v22" />
              <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7H14a3.5 3.5 0 0 1 0 7H6" />
          </svg>
        {% else %}
          <span style="font-size:22px;color:#4b5563;font-weight:600;">+</span>
        {% endif %}
      </div>

      <!-- –¢–ï–ö–°–¢–û–í–´–ô –ë–õ–û–ö -->
      <div style="display:flex; flex-direction:column; gap:4px; line-height:1.3;">

        <span style="
            font-size:11px;
            text-transform:uppercase;
            letter-spacing:0.08em;
            color:#6b7280;
        ">
          –ú–∞–∫—Ä–æ—ç–∫–æ–Ω–æ–º–∏–∫–∞ ¬∑ –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç
        </span>

        {% if obj.pk %}
          <span style="font-size:19px; font-weight:600; color:#111827;">
            {% if obj.date %}
              –ö—É—Ä—Å –≤–∞–ª—é—Ç—ã –Ω–∞ {{ obj.date|date:"d.m.Y" }}
            {% else %}
              –ó–∞–ø–∏—Å—å –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç—ã
            {% endif %}
          </span>
        {% else %}
          <span style="font-size:19px; font-weight:600; color:#111827;">
            –ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç—ã
          </span>
        {% endif %}

        <!-- –ë–ï–ô–î–ñ–ò -->
        <div style="display:flex; flex-wrap:wrap; gap:6px; margin-top:4px;">

          {% if obj.pk %}
            <span style="
                font-size:11px; padding:2px 8px; border-radius:6px;
                background:#dcfce7; color:#166534; font-weight:600;
            ">
              –†–µ–∂–∏–º: —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
            </span>
          {% else %}
            <span style="
                font-size:11px; padding:2px 8px; border-radius:6px;
                background:#e0f2fe; color:#0369a1; font-weight:600;
            ">
              –†–µ–∂–∏–º: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
            </span>
          {% endif %}

          {% if obj.pk %}
            {% if obj.char_code or obj.code or obj.value %}
              <span style="
                  font-size:11px; padding:2px 8px; border-radius:6px;
                  background:#fefce8; color:#854d0e;
                  font-weight:500; display:flex; align-items:center; gap:4px;
              ">
                üíµ
                <span style="font-weight:600;">
                  {{ obj.char_code|default:obj.code }}
                  {% if obj.nominal %} ¬∑ {{ obj.nominal }} –µ–¥.{% endif %}
                </span>

                {% if obj.value %}
                  <span style="opacity:.8;">= {{ obj.value }} RUB</span>
                {% endif %}
              </span>
            {% endif %}
          {% endif %}
        </div>

        <span style="margin-top:4px; font-size:11px; color:#6b7280; max-width:520px;">
          –£–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—É, –≤–∞–ª—é—Ç—É –∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∫—É—Ä—Å –¶–ë –†–§.
          –≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ —Ä–∞—Å—á—ë—Ç–æ–≤.
        </span>

      </div>
    </div>

    <div style="flex:1;"></div>

    <!-- –ü–†–ê–í–ê–Ø –ö–ê–†–¢–û–ß–ö–ê -->
    <div style="
        min-width:260px; max-width:320px;
        border-radius:14px; background:rgba(248,250,252,0.95);
        box-shadow:0 18px 40px rgba(15,23,42,0.16);
        padding:10px 12px 12px;
        display:flex; flex-direction:column; gap:8px;
    ">

      <div style="display:flex; justify-content:space-between; align-items:baseline;">
        <span style="
            font-size:11px; letter-spacing:0.14em;
            text-transform:uppercase; color:#9ca3af;
        ">–ù–∞–≤–∏–≥–∞—Ü–∏—è</span>

        <span style="font-size:13px; font-weight:600; color:#0f172a;">
          –î–µ–π—Å—Ç–≤–∏—è
        </span>
      </div>

      <div style="display:flex; flex-direction:column; gap:6px; margin-top:2px;">

        <a href="{% url opts|admin_urlname:'changelist' %}"
           class="button"
           style="
             font-size:13px;
             padding:4px 10px; border-radius:6px;
             display:flex; align-items:center; gap:6px;
           ">
          ‚Üê –í—Å–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç
        </a>

        <a href="{% url 'admin:app_list' 'macro' %}"
           class="button"
           style="
             font-size:12px; padding:3px 10px;
             border-radius:6px;
             display:flex; align-items:center; gap:6px;
           ">
          üìä –ö –¥—Ä—É–≥–∏–º –º–∞–∫—Ä–æ–ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º
        </a>

        <div style="font-size:11px; color:#6b7280; line-height:1.4;">
          –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ—Å—á—ë—Ç–∞ –∞—Ä–µ–Ω–¥–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π, –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç–∏.
        </div>

      </div>
    </div>

  </div>

  <!-- –ù–ò–ñ–ù–ò–ï –•–õ–ï–ë–ù–´–ï –ö–†–û–®–ö–ò -->
  <div style="
      display:flex; justify-content:space-between; align-items:center;
      margin-top:4px; padding:6px 2px 0;
      border-top:1px solid #e5e7eb;
      color:#6b7280; font-size:11px;
  ">
    <nav style="display:flex; align-items:center; gap:4px; flex-wrap:wrap;">
      <a href="{% url 'admin:index' %}"
         style="text-transform:uppercase; letter-spacing:0.08em;
                text-decoration:none; color:#9ca3af;">
        –ù–ê–ß–ê–õ–û
      </a>
      <span>‚Ä∫</span>

      <a href="{% url 'admin:app_list' 'macro' %}"
         style="text-transform:uppercase; letter-spacing:0.08em;
                text-decoration:none; color:#9ca3af;">
        –ú–ê–ö–†–û–ü–û–ö–ê–ó–ê–¢–ï–õ–ò
      </a>
      <span>‚Ä∫</span>

      <a href="{% url opts|admin_urlname:'changelist' %}"
         style="text-transform:uppercase; letter-spacing:0.08em;
                text-decoration:none; color:#9ca3af;">
        –ö–£–†–°–´ –í–ê–õ–Æ–¢
      </a>
      <span>‚Ä∫</span>

      <span style="
          text-transform:uppercase; letter-spacing:0.08em;
          color:#4b5563; font-weight:600;
      ">
        {% if obj.pk %}–†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–ï{% else %}–ù–û–í–ê–Ø –ó–ê–ü–ò–°–¨{% endif %}
      </span>
    </nav>

    {% if obj.pk %}
      <span style="color:#9ca3af;">
        {% if obj.date %}{{ obj.date|date:"d.m.Y" }}{% endif %}
        {% if obj.char_code or obj.code %} ¬∑ {{ obj.char_code|default:obj.code }}{% endif %}
        {% if obj.value %} ¬∑ {{ obj.value }} RUB{% endif %}
      </span>
    {% endif %}
  </div>

{% endwith %}
{% endblock %}


{% block content %}
  {{ block.super }}
{% endblock %}

{% block object-tools %}
  {{ block.super }}
{% endblock %}
