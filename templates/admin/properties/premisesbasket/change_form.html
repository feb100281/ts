{% extends "admin/change_form.html" %}
{% load static %}
{% load admin_urls %}

{% block breadcrumbs %}{% endblock %}

{% block content_title %}
{% with obj=adminform.form.instance %}
{% with opts=opts %}

<div style="
    display:flex;
    align-items:flex-start;
    gap:16px;
    flex-wrap:wrap;
    padding-bottom:6px;
">

  {# ===== –õ–ï–í–ê–Ø –ß–ê–°–¢–¨ ===== #}
  <div style="display:flex; align-items:flex-start; gap:12px; flex-wrap:wrap;">

    {# –ê–≤–∞—Ç–∞—Ä –∫–æ—Ä–∑–∏–Ω—ã #}
    <div style="
        width:40px;
        height:40px;
        border-radius:6px;
        background:#0f172a;
        color:#e0f2fe;
        display:flex;
        align-items:center;
        justify-content:center;
        font-size:20px;
        font-weight:600;
        box-shadow:0 0 0 1px rgba(15,23,42,.12);
    ">
      üß∫
    </div>

    {# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è #}
    <div style="display:flex; flex-direction:column; gap:4px;">

      <span style="
          font-size:11px;
          text-transform:uppercase;
          letter-spacing:0.06em;
          color:#6b7280;
      ">
        –ö–æ—Ä–∑–∏–Ω–∞ –ø–æ–º–µ—â–µ–Ω–∏–π
      </span>

      {# === –ó–ê–ì–û–õ–û–í–û–ö === #}
      <span style="font-size:19px;font-weight:600;color:#111827;">
        {% if obj.pk and obj.premises %}
          –ü–æ–º–µ—â–µ–Ω–∏–µ {{ obj.premises.premises_number }} ({{ obj.premises.area }} –º¬≤)
        {% else %}
          –ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å –∫–æ—Ä–∑–∏–Ω—ã
        {% endif %}
      </span>

      <div style="display:flex; flex-wrap:wrap; gap:6px; margin-top:4px;">

        {# –†–µ–∂–∏–º —Ñ–æ—Ä–º—ã #}
        {% if obj.pk %}
          <span style="font-size:11px;padding:2px 8px;border-radius:6px;
                       background:#dcfce7;color:#166534;font-weight:600;">
            –†–µ–∂–∏–º: —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
          </span>
        {% else %}
          <span style="font-size:11px;padding:2px 8px;border-radius:6px;
                       background:#e0f2fe;color:#0369a1;font-weight:600;">
            –†–µ–∂–∏–º: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
          </span>
        {% endif %}



        {# –ü–æ–º–µ—â–µ–Ω–∏–µ #}
        {% if obj.premises %}
          <span style="font-size:11px;padding:2px 8px;border-radius:6px;
                       background:#eef2ff;color:#3730a3;font-weight:500;">
            –ü–æ–º–µ—â–µ–Ω–∏–µ: {{ obj.premises.premises_number }}
          </span>

          {# –≠—Ç–∞–∂ #}
          {% if obj.premises.floor %}
          <span style="font-size:11px;padding:2px 8px;border-radius:6px;
                       background:#fefce8;color:#854d0e;font-weight:500;">
            –≠—Ç–∞–∂: {{ obj.premises.floor.floor_number }}
          </span>
          {% endif %}

          {# –ë–∞—à–Ω—è #}
          {% if obj.premises.floor.property %}
          <span style="font-size:11px;padding:2px 8px;border-radius:6px;
                       background:#ecfeff;color:#0e7490;font-weight:500;">
            –ë–∞—à–Ω—è: {{ obj.premises.floor.property.name }}
          </span>
          {% endif %}
        {% endif %}

      </div>

    </div>
  </div>

  {# ===== –ü–†–ê–í–ê–Ø –ö–ê–†–¢–û–ß–ö–ê ===== #}
  <div style="
      min-width:230px;
      max-width:280px;
      border-radius:14px;
      background:rgba(248,250,252,0.9);
      box-shadow:0 18px 40px rgba(15,23,42,0.16);
      padding:10px 12px 12px;
      display:flex;
      flex-direction:column;
      gap:8px;
  ">

    <div style="display:flex;justify-content:space-between;align-items:baseline;">
      <span style="font-size:11px;letter-spacing:0.14em;text-transform:uppercase;color:#9ca3af;">
        –ù–∞–≤–∏–≥–∞—Ü–∏—è
      </span>
      <span style="font-size:13px;font-weight:600;color:#0f172a;">
        –î–µ–π—Å—Ç–≤–∏—è
      </span>
    </div>

    <div style="display:flex;flex-direction:column;gap:6px;margin-top:2px;">

      {# –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ—Ä–∑–∏–Ω—ã #}
      {% url opts|admin_urlname:'changelist' as basket_list %}
      <a href="{{ basket_list }}"
         class="button"
         style="font-size:13px;padding:4px 10px;border-radius:6px;">
        ‚Üê –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ—Ä–∑–∏–Ω—ã
      </a>

      {# –ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–º–µ—â–µ–Ω–∏—é #}
      {% if obj.pk and obj.premises %}
        <a href="{% url 'admin:properties_premises_change' obj.premises.pk %}"
           class="button"
           style="font-size:12px;padding:3px 10px;border-radius:6px;">
          üè¢ –û—Ç–∫—Ä—ã—Ç—å –ø–æ–º–µ—â–µ–Ω–∏–µ
        </a>
      {% endif %}

      {# –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–±—ä–µ–∫—Ç—É #}
      {% if obj.pk and obj.premises and obj.premises.floor.property %}
        <a href="{% url 'admin:properties_property_change' obj.premises.floor.property.pk %}"
           class="button"
           style="font-size:12px;padding:3px 10px;border-radius:6px;">
          üóº –û—Ç–∫—Ä—ã—Ç—å –æ–±—ä–µ–∫—Ç
        </a>
      {% endif %}

    </div>

  </div>
</div>

{% endwith %}
{% endwith %}
{% endblock %}

{% block content %}
  {{ block.super }}
{% endblock %}
